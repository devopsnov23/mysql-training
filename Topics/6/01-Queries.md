## Subqueries and Data Modelling 

### How do Subqueries work?

Using the IN operator a SELECT statement can be constructed to see if a column values matches what is in a specified list...  
```
SELECT lastname, firstname, state
FROM author
WHERE state IN ('IL', 'UT', 'MI')
ORDER BY 1, 2, 3;
```

The values in the list can be generated by another SELECT statement instead of keyed in directly to the statement.  

If I want to find all authors who live in states where a publisher is based I could first look up the distinct states in the publisher table, 'CA' and 'NY' and then use this...  
```
SELECT lastname, firstname, state
FROM author
WHERE state IN ('CA', 'NY')
ORDER BY 1, 2, 3;
```

...Or I could replace the list with another SELECT statement like so...  
```
SELECT lastname, firstname, state
FROM author
WHERE state IN
	(SELECT DISTINCT state FROM publisher)
ORDER BY 1, 2, 3;
```

The list of DISTINCT states in the publisher table could change (in the real world) if we added another publisher to the table from a different state.  

Conceptually, subqueries can be nested as deep as you want. In most cases, a subquery statement is processed from the bottom-up.  
The deepest nested SELECT statement sends values up to the next SELECT statement which again sends value up to the next SELECT, etc.  

It is important to remember that the values generated by a SQL statement must match the kind of value being compared to the left of the IN operator.  

This would be a mistake...  
```
SELECT lastname, firstname, state
FROM author
WHERE city IN
	(SELECT DISTINCT state FROM publisher)
ORDER BY 1, 2, 3;
```
Because I am comparing the city column to a generated list of states. This does not make logical sense.  

Also, you must compare one column to a list of values generated from one column.  

This would be a mistake...  
```
SELECT lastname, firstname, state
FROM author
WHERE city IN
	(SELECT city, state FROM publisher)
ORDER BY 1, 2, 3;
```

... because the inner query has generated a list of cities and states that the statement is comparing to city value alone.  

### Subqueries with the IN operator 

### Subqueries using a comparison operator 

### Subqueries Vs Joins  

### Using a subquery Vs Self-Join 

### How data is organized in a relational database 

### The Entity-Relationship Approach

### Normalization Guidelines 

### Assignment 
1. Name some advantages and disadvantages to generating an "IN" list with another SELECT statement.  

### Assignment 

